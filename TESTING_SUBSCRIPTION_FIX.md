# Инструкция по тестированию исправленной подписки

## Что было исправлено:
1. ✅ Home экран теперь показывает красивую карточку с названием тарифа и кол-вом дней
2. ✅ Используется `durationDays` из API вместо расчета разницы дат
3. ✅ Subscription экран также использует `durationDays` из API
4. ✅ Нет больше "{0}" в локализации - теперь показывается реальное количество дней

## Как тестировать:

### Шаг 1: Откройте эмулятор
Откройте Android Studio или запустите эмулятор вручную.

### Шаг 2: Залогиньтесь
- Email: `testuser_746154@test.com`
- Пароль: `TestPassword123`
- Нажмите **LOGIN**

### Шаг 3: Проверьте Home экран
После успешного входа вы должны увидеть:
- Карточка: **"No active subscription"** (серая, без тарифа)
- Кнопка: **"Buy subscription"**

**✅ ОК если:** Карточка выглядит правильно (не "{0}", не ошибка)

### Шаг 4: Перейдите на экран подписки
Нажмите кнопку **"Buy subscription"**

### Шаг 5: Активируйте тест 7 дней
1. На экране подписки вы увидите список тарифов
2. Найдите "Test 7 Days" или подобное
3. Нажмите **"Select Plan"** для этого тарифа
4. Подтвердите активацию

### Шаг 6: Проверьте Home экран после активации
После активации приложение должно:
1. Вернуться на Home экран
2. Показать карточку: **"Subscription is active"** с:
   - Название: "Test 7 Days Free" или похожее
   - **7 дней** (НЕ "6 дней" и НЕ "{0}")

**✅ ОК если:** Показывает "7 дней", а не "6 дней"

### Шаг 7: Переключение между экранами
1. Нажмите "Buy subscription" снова
2. На Subscription экране должно показать: **"Subscription is active"** + 7 дней
3. Верните на Home экран (нажмите back)
4. Home должно показать то же самое

**✅ ОК если:** Оба экрана показывают одно и то же

## Мониторинг логов

В другом терминале вы можете следить за логами:
```powershell
Get-Content C:\vpn\flutter_logs.txt -Tail 50 -Wait
```

Ищите логи типа:
```
[DEBUG] HomeScreen._loadSubscriptionStatus() starting...
[DEBUG] HomeScreen loaded subscription: UserSubscriptionOut(...)
[DEBUG]   - durationDays: 7
[DEBUG] Setting _hasActiveSubscription = true
```

## Если что-то не работает:

1. **"Subscription active until {0}"** - локализация не применена
   - Решение: Нужна перекомпиляция или Hot Restart (R в flutter run)

2. **Показывает "6 дней" вместо "7 дней"**
   - Это означает, что backend вернул неправильное значение
   - Проверьте backend logs

3. **На Home показывает одно, на Subscription другое**
   - Решение: Нажмите Hot Refresh (R)
   - Или переставьте приложение: `flutter clean && flutter run`

4. **Ошибка при активации**
   - Проверьте flutter_logs.txt ищите [ERROR]
   - Посмотрите backend логи на сервере

